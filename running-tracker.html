<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlayFit - Rastreamento de Corrida</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10/dist/framer-motion.umd.js"></script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#FBBF24',
                            50: '#FEF7E3',
                            100: '#FEF0C7',
                            200: '#FDE68A',
                            300: '#FCD34D',
                            400: '#FBBF24',
                            500: '#F59E0B',
                            600: '#D97706',
                            700: '#B45309',
                            800: '#92400E',
                            900: '#78350F'
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            animation: slideIn 0.3s ease-out;
        }
        
        .toast.success {
            background-color: #10B981;
        }
        
        .toast.error {
            background-color: #EF4444;
        }
        
        .toast.info {
            background-color: #3B82F6;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        // Toast system
        const useToast = () => {
            const showToast = (message, type = 'info') => {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            };
            
            return {
                success: (message) => showToast(message, 'success'),
                error: (message) => showToast(message, 'error'),
                info: (message) => showToast(message, 'info')
            };
        };

        // Components
        const Card = ({ children, className = '', ...props }) => (
            <div className={`bg-white rounded-lg shadow-md border border-gray-200 ${className}`} {...props}>
                {children}
            </div>
        );

        const Button = ({ children, variant = 'default', size = 'md', className = '', onClick, disabled, ...props }) => {
            const baseClasses = "font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2";
            const variants = {
                default: "bg-primary-400 text-gray-900 hover:bg-primary-500 focus:ring-primary-400",
                outline: "border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-300",
                ghost: "text-gray-600 hover:bg-gray-100 focus:ring-gray-300",
                destructive: "bg-red-500 text-white hover:bg-red-600 focus:ring-red-500"
            };
            const sizes = {
                sm: "px-3 py-1.5 text-sm",
                md: "px-4 py-2 text-sm",
                lg: "px-6 py-3 text-lg"
            };
            
            return (
                <button
                    className={`${baseClasses} ${variants[variant]} ${sizes[size]} ${className} ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`}
                    onClick={onClick}
                    disabled={disabled}
                    {...props}
                >
                    {children}
                </button>
            );
        };

        const Progress = ({ value, className = '' }) => (
            <div className={`w-full bg-gray-200 rounded-full h-2 ${className}`}>
                <div 
                    className="bg-primary-400 h-2 rounded-full transition-all duration-500"
                    style={{ width: `${Math.min(100, Math.max(0, value || 0))}%` }}
                />
            </div>
        );

        const Badge = ({ children, className = '', variant = 'default' }) => {
            const variants = {
                default: "bg-gray-100 text-gray-800",
                outline: "border border-gray-300 text-gray-700"
            };
            
            return (
                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${variants[variant]} ${className}`}>
                    {children}
                </span>
            );
        };

        const Tabs = ({ children, value, onValueChange, className = '' }) => (
            <div className={className}>
                {React.Children.map(children, child => 
                    React.cloneElement(child, { activeTab: value, setActiveTab: onValueChange })
                )}
            </div>
        );

        const TabsList = ({ children, activeTab, setActiveTab, className = '' }) => (
            <div className={`flex bg-gray-100 p-1 rounded-lg ${className}`}>
                {React.Children.map(children, child => 
                    React.cloneElement(child, { activeTab, setActiveTab })
                )}
            </div>
        );

        const TabsTrigger = ({ children, value, activeTab, setActiveTab, className = '' }) => (
            <button
                className={`flex-1 py-2 px-3 text-sm font-medium rounded-md transition-colors ${
                    activeTab === value 
                        ? 'bg-white text-gray-900 shadow-sm' 
                        : 'text-gray-600 hover:text-gray-900'
                } ${className}`}
                onClick={() => setActiveTab(value)}
            >
                {children}
            </button>
        );

        const TabsContent = ({ children, value, activeTab, className = '' }) => (
            activeTab === value ? <div className={className}>{children}</div> : null
        );

        // Icons (using Lucide icons)
        const PlayIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.5a2 2 0 110 4H9V10z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 8l6 6 6-6" /></svg>;
        const PauseIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const SquareIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" /></svg>;
        const TrophyIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" /></svg>;
        const TargetIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" /></svg>;
        const MapPinIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>;
        const ClockIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const RouteIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" /></svg>;
        const PlusIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>;
        const FilterIcon = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z" /></svg>;

        // Main App Component
        const RunningTracker = () => {
            const [activeTab, setActiveTab] = useState('track');
            const [isTracking, setIsTracking] = useState(false);
            const [isPaused, setIsPaused] = useState(false);
            const [activityType, setActivityType] = useState('running');
            const [currentSession, setCurrentSession] = useState({
                duration: 0,
                distance: 0,
                averagePace: 0,
                calories: 0,
                route: []
            });
            const [sessions, setSessions] = useState([]);
            const [goals, setGoals] = useState([]);
            const [achievements, setAchievements] = useState([]);
            
            const toast = useToast();
            const intervalRef = useRef(null);
            const watchIdRef = useRef(null);
            const startTimeRef = useRef(null);
            const pausedTimeRef = useRef(0);

            // Initialize data from localStorage
            useEffect(() => {
                const savedSessions = localStorage.getItem('playfit-running-sessions');
                const savedGoals = localStorage.getItem('playfit-running-goals');
                const savedAchievements = localStorage.getItem('playfit-running-achievements');
                
                if (savedSessions) {
                    setSessions(JSON.parse(savedSessions));
                }
                
                if (savedGoals) {
                    setGoals(JSON.parse(savedGoals));
                } else {
                    setGoals([
                        {
                            id: '1',
                            type: 'distance',
                            title: 'Correr 5 km',
                            target: 5000,
                            current: 0,
                            unit: 'm',
                            completed: false
                        },
                        {
                            id: '2',
                            type: 'frequency',
                            title: 'Correr 3 vezes por semana',
                            target: 3,
                            current: 0,
                            unit: 'vezes',
                            completed: false
                        }
                    ]);
                }
                
                if (savedAchievements) {
                    setAchievements(JSON.parse(savedAchievements));
                } else {
                    setAchievements([
                        {
                            id: '1',
                            title: 'Primeiro Passo',
                            description: 'Complete sua primeira corrida',
                            icon: '🏃‍♂️',
                            unlocked: false,
                            progress: 0,
                            target: 1
                        },
                        {
                            id: '2',
                            title: 'Maratonista',
                            description: 'Corra 10 km em uma única sessão',
                            icon: '🏅',
                            unlocked: false,
                            progress: 0,
                            target: 10000
                        },
                        {
                            id: '3',
                            title: 'Consistência',
                            description: 'Corra 5 dias seguidos',
                            icon: '🔥',
                            unlocked: false,
                            progress: 0,
                            target: 5
                        }
                    ]);
                }
            }, []);

            // Save data to localStorage
            useEffect(() => {
                localStorage.setItem('playfit-running-sessions', JSON.stringify(sessions));
            }, [sessions]);

            useEffect(() => {
                localStorage.setItem('playfit-running-goals', JSON.stringify(goals));
            }, [goals]);

            useEffect(() => {
                localStorage.setItem('playfit-running-achievements', JSON.stringify(achievements));
            }, [achievements]);

            // Start tracking
            const startTracking = () => {
                if (!navigator.geolocation) {
                    toast.error('Geolocalização não suportada pelo navegador');
                    return;
                }

                setIsTracking(true);
                setIsPaused(false);
                startTimeRef.current = Date.now();
                pausedTimeRef.current = 0;
                
                setCurrentSession({
                    duration: 0,
                    distance: 0,
                    averagePace: 0,
                    calories: 0,
                    route: []
                });

                watchIdRef.current = navigator.geolocation.watchPosition(
                    (position) => {
                        const newPoint = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                            timestamp: Date.now()
                        };
                        
                        setCurrentSession(prev => ({
                            ...prev,
                            route: [...prev.route, newPoint]
                        }));
                    },
                    (error) => {
                        console.error('Erro de geolocalização:', error);
                        toast.error('Erro ao acessar localização');
                    },
                    { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
                );

                intervalRef.current = setInterval(() => {
                    if (!isPaused) {
                        const now = Date.now();
                        const elapsed = (now - startTimeRef.current - pausedTimeRef.current) / 1000;
                        
                        setCurrentSession(prev => {
                            const distance = calculateDistance(prev.route);
                            const pace = distance > 0 ? (elapsed / 60) / (distance / 1000) : 0;
                            const calories = calculateCalories(distance, elapsed, activityType);
                            
                            return {
                                ...prev,
                                duration: elapsed,
                                distance,
                                averagePace: pace,
                                calories
                            };
                        });
                    }
                }, 1000);

                toast.success(`${activityType === 'running' ? 'Corrida' : 'Caminhada'} iniciada!`);
            };

            // Toggle pause
            const togglePause = () => {
                if (isPaused) {
                    setIsPaused(false);
                    startTimeRef.current = Date.now() - currentSession.duration * 1000;
                    toast.success('Atividade retomada!');
                } else {
                    setIsPaused(true);
                    pausedTimeRef.current += Date.now() - startTimeRef.current;
                    toast.info('Atividade pausada');
                }
            };

            // Finish tracking
            const finishTracking = () => {
                if (watchIdRef.current) {
                    navigator.geolocation.clearWatch(watchIdRef.current);
                }
                if (intervalRef.current) {
                    clearInterval(intervalRef.current);
                }

                const newSession = {
                    id: Date.now().toString(),
                    type: activityType,
                    date: new Date().toISOString(),
                    duration: currentSession.duration,
                    distance: currentSession.distance,
                    averagePace: currentSession.averagePace,
                    calories: currentSession.calories,
                    route: currentSession.route,
                    completed: true
                };

                setSessions(prev => [newSession, ...prev]);
                checkAchievements(newSession);
                updateGoals(newSession);
                
                setIsTracking(false);
                setIsPaused(false);
                
                toast.success('Sessão finalizada com sucesso!');
            };

            // Calculate distance using Haversine formula
            const calculateDistance = (route) => {
                if (route.length < 2) return 0;
                
                let totalDistance = 0;
                for (let i = 1; i < route.length; i++) {
                    const prev = route[i - 1];
                    const curr = route[i];
                    
                    const R = 6371000; // Earth's radius in meters
                    const dLat = (curr.lat - prev.lat) * Math.PI / 180;
                    const dLng = (curr.lng - prev.lng) * Math.PI / 180;
                    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                              Math.cos(prev.lat * Math.PI / 180) * Math.cos(curr.lat * Math.PI / 180) *
                              Math.sin(dLng/2) * Math.sin(dLng/2);
                    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                    const distance = R * c;
                    
                    totalDistance += distance;
                }
                
                return totalDistance;
            };

            // Calculate calories
            const calculateCalories = (distance, duration, type) => {
                const distanceKm = distance / 1000;
                const durationHours = duration / 3600;
                const weight = 70; // Average weight in kg
                
                let met = type === 'running' ? 8.0 : 3.8;
                return Math.round(met * weight * durationHours);
            };

            // Check achievements
            const checkAchievements = (session) => {
                setAchievements(prev => prev.map(achievement => {
                    if (achievement.unlocked) return achievement;
                    
                    let progress = achievement.progress;
                    
                    switch (achievement.id) {
                        case '1': // First Step
                            progress = sessions.length + 1;
                            break;
                        case '2': // Marathoner
                            progress = Math.max(progress, session.distance);
                            break;
                        case '3': // Consistency
                            const sortedSessions = [...sessions, session].sort((a, b) => 
                                new Date(b.date).getTime() - new Date(a.date).getTime()
                            );
                            let consecutive = 1;
                            for (let i = 1; i < sortedSessions.length; i++) {
                                const curr = new Date(sortedSessions[i-1].date);
                                const prev = new Date(sortedSessions[i].date);
                                const diffDays = (curr.getTime() - prev.getTime()) / (1000 * 60 * 60 * 24);
                                if (diffDays <= 1) consecutive++;
                                else break;
                            }
                            progress = consecutive;
                            break;
                    }
                    
                    const unlocked = progress >= achievement.target;
                    if (unlocked && !achievement.unlocked) {
                        toast.success(`🏆 Conquista desbloqueada: ${achievement.title}!`);
                    }
                    
                    return {
                        ...achievement,
                        progress,
                        unlocked,
                        unlockedAt: unlocked ? new Date().toISOString() : undefined
                    };
                }));
            };

            // Update goals
            const updateGoals = (session) => {
                setGoals(prev => prev.map(goal => {
                    if (goal.completed) return goal;
                    
                    let current = goal.current;
                    
                    switch (goal.type) {
                        case 'distance':
                            current += session.distance;
                            break;
                        case 'time':
                            current += session.duration;
                            break;
                        case 'frequency':
                            current += 1;
                            break;
                    }
                    
                    const completed = current >= goal.target;
                    if (completed && !goal.completed) {
                        toast.success(`🎯 Meta alcançada: ${goal.title}!`);
                    }
                    
                    return { ...goal, current, completed };
                }));
            };

            // Format helpers
            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const formatDistance = (meters) => {
                if (meters >= 1000) {
                    return `${(meters / 1000).toFixed(2)} km`;
                }
                return `${meters.toFixed(0)} m`;
            };

            const formatPace = (pace) => {
                if (pace === 0 || !isFinite(pace)) return '0:00';
                const mins = Math.floor(pace);
                const secs = Math.floor((pace - mins) * 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            return (
                <div className="min-h-screen bg-gray-50 pb-20">
                    <div className="container mx-auto px-4 py-6 max-w-md">
                        <div className="flex items-center mb-6">
                            <span className="text-2xl mr-3">🏃‍♂️</span>
                            <h1 className="text-2xl font-bold text-gray-900">PlayFit Runner</h1>
                        </div>

                        <Tabs value={activeTab} onValueChange={setActiveTab}>
                            <TabsList className="grid w-full grid-cols-4 mb-6">
                                <TabsTrigger value="track">Rastrear</TabsTrigger>
                                <TabsTrigger value="history">Histórico</TabsTrigger>
                                <TabsTrigger value="goals">Metas</TabsTrigger>
                                <TabsTrigger value="achievements">Conquistas</TabsTrigger>
                            </TabsList>

                            <TabsContent value="track">
                                <div className="space-y-6">
                                    {/* Activity selector */}
                                    {!isTracking && (
                                        <Card className="p-6">
                                            <h2 className="text-xl font-semibold mb-4">Escolha sua atividade</h2>
                                            <div className="grid grid-cols-2 gap-4">
                                                <Button
                                                    variant={activityType === 'running' ? 'default' : 'outline'}
                                                    onClick={() => setActivityType('running')}
                                                    className="h-20 flex flex-col items-center justify-center"
                                                >
                                                    <span className="text-2xl mb-2">🏃‍♂️</span>
                                                    Corrida
                                                </Button>
                                                <Button
                                                    variant={activityType === 'walking' ? 'default' : 'outline'}
                                                    onClick={() => setActivityType('walking')}
                                                    className="h-20 flex flex-col items-center justify-center"
                                                >
                                                    <span className="text-2xl mb-2">🚶‍♂️</span>
                                                    Caminhada
                                                </Button>
                                            </div>
                                        </Card>
                                    )}

                                    {/* Real-time metrics */}
                                    <Card className="p-6">
                                        <div className="grid grid-cols-2 gap-4 mb-6">
                                            <div className="text-center">
                                                <div className="text-2xl font-bold text-primary-500">
                                                    {formatTime(currentSession.duration)}
                                                </div>
                                                <div className="text-sm text-gray-600">Tempo</div>
                                            </div>
                                            <div className="text-center">
                                                <div className="text-2xl font-bold text-primary-500">
                                                    {formatDistance(currentSession.distance)}
                                                </div>
                                                <div className="text-sm text-gray-600">Distância</div>
                                            </div>
                                            <div className="text-center">
                                                <div className="text-2xl font-bold text-primary-500">
                                                    {formatPace(currentSession.averagePace)}
                                                </div>
                                                <div className="text-sm text-gray-600">Ritmo/km</div>
                                            </div>
                                            <div className="text-center">
                                                <div className="text-2xl font-bold text-primary-500">
                                                    {currentSession.calories}
                                                </div>
                                                <div className="text-sm text-gray-600">Calorias</div>
                                            </div>
                                        </div>

                                        {/* Controls */}
                                        <div className="flex justify-center gap-4">
                                            {!isTracking ? (
                                                <Button
                                                    onClick={startTracking}
                                                    className="px-8 py-3 text-lg"
                                                    size="lg"
                                                >
                                                    <PlayIcon />
                                                    <span className="ml-2">Iniciar {activityType === 'running' ? 'Corrida' : 'Caminhada'}</span>
                                                </Button>
                                            ) : (
                                                <>
                                                    <Button
                                                        onClick={togglePause}
                                                        variant="outline"
                                                        size="lg"
                                                        className="px-6"
                                                    >
                                                        {isPaused ? <PlayIcon /> : <PauseIcon />}
                                                    </Button>
                                                    <Button
                                                        onClick={finishTracking}
                                                        variant="destructive"
                                                        size="lg"
                                                        className="px-6"
                                                    >
                                                        <SquareIcon />
                                                    </Button>
                                                </>
                                            )}
                                        </div>

                                        {isTracking && (
                                            <div className="mt-4 text-center">
                                                <div className={`text-sm ${isPaused ? 'text-orange-600' : 'text-green-600'}`}>
                                                    {isPaused ? '⏸️ Pausado' : '🔴 Rastreando...'}
                                                </div>
                                            </div>
                                        )}
                                    </Card>

                                    {/* Simulated map */}
                                    <Card className="p-6">
                                        <h3 className="text-lg font-semibold mb-4">Trajeto</h3>
                                        <div className="bg-gray-200 rounded-lg h-48 flex items-center justify-center">
                                            <div className="text-center text-gray-500">
                                                <MapPinIcon />
                                                <p className="mt-2">Mapa aparecerá aqui</p>
                                                <p className="text-sm mt-1">
                                                    Pontos registrados: {currentSession.route.length}
                                                </p>
                                            </div>
                                        </div>
                                    </Card>
                                </div>
                            </TabsContent>

                            <TabsContent value="history">
                                <div className="space-y-4">
                                    <div className="flex justify-between items-center">
                                        <h2 className="text-xl font-semibold">Histórico de Sessões</h2>
                                        <Button variant="outline" size="sm">
                                            <FilterIcon />
                                            <span className="ml-2">Filtrar</span>
                                        </Button>
                                    </div>

                                    {sessions.length === 0 ? (
                                        <Card className="p-8 text-center">
                                            <RouteIcon />
                                            <p className="text-gray-600 mt-2">Nenhuma sessão registrada ainda</p>
                                            <p className="text-sm text-gray-500 mt-1">Inicie sua primeira corrida na aba "Rastrear"</p>
                                        </Card>
                                    ) : (
                                        <div className="space-y-4">
                                            {sessions.map((session) => (
                                                <Card key={session.id} className="p-4">
                                                    <div className="flex justify-between items-start mb-2">
                                                        <div className="flex items-center gap-2">
                                                            <span className="text-lg">
                                                                {session.type === 'running' ? '🏃‍♂️' : '🚶‍♂️'}
                                                            </span>
                                                            <div>
                                                                <div className="font-semibold">
                                                                    {session.type === 'running' ? 'Corrida' : 'Caminhada'}
                                                                </div>
                                                                <div className="text-sm text-gray-600">
                                                                    {new Date(session.date).toLocaleDateString('pt-BR')}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <Badge variant="outline">
                                                            {formatDistance(session.distance)}
                                                        </Badge>
                                                    </div>
                                                    
                                                    <div className="grid grid-cols-3 gap-4 mt-4">
                                                        <div className="text-center">
                                                            <div className="font-semibold">{formatTime(session.duration)}</div>
                                                            <div className="text-xs text-gray-600">Tempo</div>
                                                        </div>
                                                        <div className="text-center">
                                                            <div className="font-semibold">{formatPace(session.averagePace)}</div>
                                                            <div className="text-xs text-gray-600">Ritmo</div>
                                                        </div>
                                                        <div className="text-center">
                                                            <div className="font-semibold">{session.calories}</div>
                                                            <div className="text-xs text-gray-600">Calorias</div>
                                                        </div>
                                                    </div>
                                                </Card>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </TabsContent>

                            <TabsContent value="goals">
                                <div className="space-y-4">
                                    <div className="flex justify-between items-center">
                                        <h2 className="text-xl font-semibold">Metas</h2>
                                        <Button size="sm">
                                            <PlusIcon />
                                            <span className="ml-2">Nova Meta</span>
                                        </Button>
                                    </div>

                                    {goals.length === 0 ? (
                                        <Card className="p-8 text-center">
                                            <TargetIcon />
                                            <p className="text-gray-600 mt-2">Nenhuma meta definida</p>
                                            <p className="text-sm text-gray-500 mt-1">Crie suas primeiras metas para se motivar</p>
                                        </Card>
                                    ) : (
                                        <div className="space-y-4">
                                            {goals.map((goal) => (
                                                <Card key={goal.id} className="p-4">
                                                    <div className="flex justify-between items-start mb-3">
                                                        <div>
                                                            <div className="font-semibold">{goal.title}</div>
                                                            <div className="text-sm text-gray-600">
                                                                {goal.current.toFixed(goal.type === 'distance' ? 0 : 1)} / {goal.target} {goal.unit}
                                                            </div>
                                                        </div>
                                                        {goal.completed && (
                                                            <Badge className="bg-green-100 text-green-800">
                                                                Concluída
                                                            </Badge>
                                                        )}
                                                    </div>
                                                    
                                                    <Progress 
                                                        value={(goal.current / goal.target) * 100} 
                                                        className="mb-2"
                                                    />
                                                    
                                                    <div className="text-sm text-gray-600">
                                                        {((goal.current / goal.target) * 100).toFixed(1)}% concluído
                                                    </div>
                                                </Card>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </TabsContent>

                            <TabsContent value="achievements">
                                <div className="space-y-4">
                                    <h2 className="text-xl font-semibold">Conquistas</h2>
                                    
                                    <div className="space-y-4">
                                        {achievements.map((achievement) => (
                                            <Card key={achievement.id} className={`p-4 ${achievement.unlocked ? 'bg-yellow-50 border-yellow-200' : ''}`}>
                                                <div className="flex items-start gap-4">
                                                    <div className="text-3xl opacity-70">
                                                        {achievement.icon}
                                                    </div>
                                                    <div className="flex-1">
                                                        <div className="flex justify-between items-start mb-2">
                                                            <div>
                                                                <div className="font-semibold">{achievement.title}</div>
                                                                <div className="text-sm text-gray-600">{achievement.description}</div>
                                                            </div>
                                                            {achievement.unlocked && (
                                                                <Badge className="bg-yellow-100 text-yellow-800">
                                                                    <TrophyIcon />
                                                                    <span className="ml-1">Desbloqueada</span>
                                                                </Badge>
                                                            )}
                                                        </div>
                                                        
                                                        <Progress 
                                                            value={(achievement.progress / achievement.target) * 100} 
                                                            className="mb-2"
                                                        />
                                                        
                                                        <div className="text-sm text-gray-600">
                                                            {achievement.progress} / {achievement.target}
                                                        </div>
                                                        
                                                        {achievement.unlocked && achievement.unlockedAt && (
                                                            <div className="text-xs text-gray-500 mt-1">
                                                                Desbloqueada em {new Date(achievement.unlockedAt).toLocaleDateString('pt-BR')}
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            </Card>
                                        ))}
                                    </div>
                                </div>
                            </TabsContent>
                        </Tabs>
                    </div>

                    {/* Bottom Navigation */}
                    <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2">
                        <div className="flex justify-around max-w-md mx-auto">
                            <Button
                                variant={activeTab === 'track' ? 'default' : 'ghost'}
                                onClick={() => setActiveTab('track')}
                                className="flex-1 flex flex-col items-center py-2"
                            >
                                <PlayIcon />
                                <span className="text-xs mt-1">Rastrear</span>
                            </Button>
                            <Button
                                variant={activeTab === 'history' ? 'default' : 'ghost'}
                                onClick={() => setActiveTab('history')}
                                className="flex-1 flex flex-col items-center py-2"
                            >
                                <ClockIcon />
                                <span className="text-xs mt-1">Histórico</span>
                            </Button>
                            <Button
                                variant={activeTab === 'goals' ? 'default' : 'ghost'}
                                onClick={() => setActiveTab('goals')}
                                className="flex-1 flex flex-col items-center py-2"
                            >
                                <TargetIcon />
                                <span className="text-xs mt-1">Metas</span>
                            </Button>
                            <Button
                                variant={activeTab === 'achievements' ? 'default' : 'ghost'}
                                onClick={() => setActiveTab('achievements')}
                                className="flex-1 flex flex-col items-center py-2"
                            >
                                <TrophyIcon />
                                <span className="text-xs mt-1">Conquistas</span>
                            </Button>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<RunningTracker />, document.getElementById('root'));
    </script>
</body>
</html> 